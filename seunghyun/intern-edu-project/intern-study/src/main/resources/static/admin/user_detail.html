<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>사용자 정보</title>
</head>
<body class="container p-4">

  <h2>사용자 정보</h2>
  <div id="userInfo" class="border p-3 bg-light">사용자 정보</div>

  <div class="mt-3">
    <button class="btn btn-secondary" onclick="goBack()">돌아가기</button>
    <button class="btn btn-warning" onclick="goUpdate()">수정하기</button>
  </div>

</body>

<script src="/js/common.js"></script>
<script>

  const userId = new URLSearchParams(location.search).get("userId");

  // 뒤로 가기
  function goBack() {
    history.back();
  }

  // 수정하기
  function goUpdate() {
    location.href = `user_update.html?userId=${userId}`;
  }

  // 사용자 정보 조회
  async function loadUserInfo() {
    const user = await ApiUtil.get(`/api/admin/${userId}`);
    if (!user) return; // ApiUtil 내부에서 showError 처리됨

    console.log(user);

    const html = `
      <div><strong>아이디</strong> : ${user.userId}</div>
      <div><strong>이름</strong> : ${user.username}</div>
      <div><strong>이메일</strong> : ${user.email}</div>
      <div><strong>전화번호</strong> : ${user.phone}</div>
      <div><strong>권한</strong> : ${user.role}</div>
      <div><strong>사용 여부</strong> : ${(user.isActive === true) ? "Y" : "N"}</div>
      <div><strong>가입일</strong> : ${user.regDate}</div>
    `;

    document.getElementById("userInfo").innerHTML = html;
  }

  document.addEventListener("DOMContentLoaded", function () {
    // common.js 호출 이후 실행되도록
    setTimeout(loadUserInfo, 100);
  });

</script>
</html>
