<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>게시글 상세</title>
</head>
<body class="container p-4">
<h2>게시글 상세</h2>
<div id="boardInfo" class="border p-3 bg-light">게시글 내용</div>

<div class="mt-3">
  <button class="btn btn-secondary" onclick="goBack()">돌아가기</button>
  <button class="btn btn-outline-danger float-right" onclick="logout()">로그아웃</button>
</div>

</body>

<script src="/js/common.js"></script>
<script>
  // 뒤로 가기
  function goBack() {
    history.back();
  }

  // 로그아웃 처리 (세션 제거는 서버에서, 여기선 로컬 스토리지만)
  function logout() {
    localStorage.clear();
    location.href = "/login.html";
  }

  // 사용자 정보 조회
  async function loadBoardInfo() {
    const boardId = new URLSearchParams(location.search).get("id");
    const board = await ApiUtil.get(`/api/boards/${boardId}`);

    if (!board) return; // ApiUtil 내부에서 showError 처리됨

    const html = `
      <div><strong>게시글 번호</strong> : ${board.id}</div>
      <div><strong>제목</strong> : ${board.title}</div>
      <div><strong>내용</strong> : ${board.content}</div>
      <div><strong>작성 시간</strong> : ${board.createdDate}</div>
    `;

    document.getElementById("boardInfo").innerHTML = html;
  }

  document.addEventListener("DOMContentLoaded", function () {
    // common.js 호출 이후 실행되도록
    setTimeout(loadBoardInfo, 100);
  });

</script>
</html>
